–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ —É—Ç–æ—á–Ω–µ–Ω–∏—é –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞. –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è Open Source —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ GitHub. –û–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ñ–∞–π–ª–∞ **README.md** (–æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω–æ–≥–æ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º) –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —à–∞–±–ª–æ–Ω–∞.

---

### üìÑ –§–∞–π–ª 1: `README.md`

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –≤ —Ñ–∞–π–ª `README.md` –≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

```markdown
# Zabbix Basic CPU Temperature Monitoring

–ü—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–ø–æ—è–¥–µ—Ä–Ω–æ + –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `lm-sensors` –∏ Zabbix Agent.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **UserParameters (One-liners)** –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫, —á—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤. –í–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Discovery (LLD).

## Credits / –ê–≤—Ç–æ—Ä—ã

* **–ê–≤—Ç–æ—Ä –∏–¥–µ–∏ / Original Idea:** [B1T0 (Tobias Scheithauer)](https://github.com/B1T0/zabbix-basic-cpu-temperature)
* **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ / Adaptation:** [didimozg](https://github.com/didimozg)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üî• **Discovery:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —è–¥–µ—Ä CPU.
* üìä **–ú–µ—Ç—Ä–∏–∫–∏:**
    * –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–≥–æ —è–¥—Ä–∞.
    * –°—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Avg).
    * –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Max).
    * –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Min).
* ‚ö†Ô∏è **–¢—Ä–∏–≥–≥–µ—Ä—ã:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ (>85¬∞C) –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (>95¬∞C).
* üìà **–ì—Ä–∞—Ñ–∏–∫–∏:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–∏–Ω/—Å—Ä–µ–¥/–º–∞–∫—Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
* ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Zabbix 7.0+, Zabbix Agent / Agent 2.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Linux)

–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç `lm-sensors` –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.

```bash
sudo apt update
sudo apt install lm-sensors gawk -y

```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–Ω—Å–æ—Ä–æ–≤ –∏ –æ—Ç–≤–µ—Ç—å—Ç–µ `YES` –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã:

```bash
sudo sensors-detect

```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∫–æ–º–∞–Ω–¥—ã:

```bash
sensors

```

### –®–∞–≥ 2: –°–∫—Ä–∏–ø—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (Discovery)

Zabbix —Ç—Ä–µ–±—É–µ—Ç JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (LLD). –î–ª—è —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–¥–∏–º –Ω–µ–±–æ–ª—å—à–æ–π —Å–∫—Ä–∏–ø—Ç.

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª:
```bash
sudo nano /etc/zabbix/zabbix_agent2.d/get_cores.sh

```


*(–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å—Ç–∞—Ä—ã–π zabbix-agent, –ø—É—Ç—å –±—É–¥–µ—Ç `/etc/zabbix/scripts/`)*
2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
```bash
#!/bin/bash
# JSON Generator for Zabbix CPU Core Discovery
first=1
echo "{\"data\":["
sensors | grep "^Core" | while read -r line; do
    # Extract core ID (assuming format "Core 0", "Core 1")
    core_id=$(echo "$line" | awk '{print $2}' | tr -d ':')

    if [ "$first" -eq 0 ]; then echo ","; fi
    echo -n "{\"{#CORE}\":\"$core_id\"}"
    first=0
done
echo "]}"

```


3. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```bash
sudo chmod +x /etc/zabbix/zabbix_agent2.d/get_cores.sh

```



### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Zabbix Agent

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
sudo nano /etc/zabbix/zabbix_agent2.d/userparameter_cputemp.conf

```


2. –í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (One-liners):
```ini
# Discovery script location
UserParameter=basicCPUTemp.discovery,/etc/zabbix/zabbix_agent2.d/get_cores.sh

# Min core temp (¬∞C)
UserParameter=basicCPUTemp.min,LC_ALL=C sensors 2>/dev/null | awk '/^Core [0-9]+:/ { s=$0; sub(/^.*: */, "", s); if (match(s, /[-+]?[0-9]+(\.[0-9]+)?/)) { t=substr(s,RSTART,RLENGTH)+0; if (c==0||t<min) min=t; c++ } } END{ if (c>0) printf("%.1f", min); else print "-1" }'

# Max core temp (¬∞C)
UserParameter=basicCPUTemp.max,LC_ALL=C sensors 2>/dev/null | awk '/^Core [0-9]+:/ { s=$0; sub(/^.*: */, "", s); if (match(s, /[-+]?[0-9]+(\.[0-9]+)?/)) { t=substr(s,RSTART,RLENGTH)+0; if (c==0||t>max) max=t; c++ } } END{ if (c>0) printf("%.1f", max); else print "-1" }'

# Avg core temp (¬∞C)
UserParameter=basicCPUTemp.avg,LC_ALL=C sensors 2>/dev/null | awk '/^Core [0-9]+:/ { s=$0; sub(/^.*: */, "", s); if (match(s, /[-+]?[0-9]+(\.[0-9]+)?/)) { sum+=substr(s,RSTART,RLENGTH)+0; c++ } } END{ if (c>0) printf("%.1f", sum/c); else print "-1" }'

# Specific core temp
UserParameter=basicCPUTemp.core[*],LC_ALL=C sensors 2>/dev/null | grep "^Core $1:" | awk '{print $3}' | sed 's/[^0-9.]//g'

```


3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≥–µ–Ω—Ç:
```bash
sudo systemctl restart zabbix-agent2

```



### –®–∞–≥ 4: –ò–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–∞

1. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª `template_cpu_temp_v7.yaml` –∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
2. –í Zabbix –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Data collection** -> **Templates**.
3. –ù–∞–∂–º–∏—Ç–µ **Import** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.
4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —à–∞–±–ª–æ–Ω –∫ –Ω—É–∂–Ω–æ–º—É —Ö–æ—Å—Ç—É.

---

**License:** MIT / GPL (as per original repo)

```

---

### üìÑ –§–∞–π–ª 2: `template_cpu_temp_v7.yaml`

–≠—Ç–æ —Å–∞–º —Ñ–∞–π–ª —à–∞–±–ª–æ–Ω–∞ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ UUIDv4).

```yaml
zabbix_export:
  version: '7.4'
  template_groups:
    - uuid: '7df96b18c230490a9a0a9e2307226338'
      name: Templates
  templates:
    - uuid: 'b9ff215cd8774e7780fc596eb582605b'
      template: 'Template basicCPUTemp'
      name: 'Template basicCPUTemp'
      description: |
        Template for monitoring CPU Temperature using lm-sensors.
        Uses optimized awk one-liners in agent config.
        
        Original idea: https://github.com/B1T0/zabbix-basic-cpu-temperature
        Adaptation: https://github.com/didimozg
      groups:
        - name: Templates
      items:
        - uuid: 'fec5da56886b40c48740a057d2be9c54'
          name: 'CPU Temperature Avg'
          key: basicCPUTemp.avg
          delay: 10s
          history: 90d
          value_type: FLOAT
          units: ¬∞C
          tags:
            - tag: Application
              value: Temperature
        - uuid: '627b89d7b1954d2ea649b23b8e83576a'
          name: 'CPU Temperature Max'
          key: basicCPUTemp.max
          delay: 10s
          history: 90d
          value_type: FLOAT
          units: ¬∞C
          tags:
            - tag: Application
              value: Temperature
          triggers:
            - uuid: 'f5075d392fd7436c8b89ae7cb74ab143'
              expression: 'last(/Template basicCPUTemp/basicCPUTemp.max)>90.0'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'avg(/Template basicCPUTemp/basicCPUTemp.max,60s)<75'
              name: 'Temperature high'
              priority: AVERAGE
            - uuid: '8347731ec5fb4fa3a1201fc0983b8cde'
              expression: 'last(/Template basicCPUTemp/basicCPUTemp.max)>95'
              recovery_mode: NONE
              name: 'Temperature too high'
              priority: DISASTER
              manual_close: 'YES'
        - uuid: '3b42e6a5c4c7418386961bb570d63b63'
          name: 'CPU Temperature Min'
          key: basicCPUTemp.min
          delay: 10s
          history: 90d
          value_type: FLOAT
          units: ¬∞C
          tags:
            - tag: Application
              value: Temperature
      discovery_rules:
        - uuid: 'aab958191be14454bbdecf00a6416b4d'
          name: 'CPU Cores Discovery'
          key: basicCPUTemp.discovery
          delay: 1h
          item_prototypes:
            - uuid: 'ab914fed6b4f477781dd24f4be9cf1b8'
              name: 'CPU Core {#CORE} Temp'
              key: 'basicCPUTemp.core[{#CORE}]'
              value_type: FLOAT
              units: ¬∞C
          trigger_prototypes:
            - uuid: '79a29e4682024220b224151475756303'
              expression: 'last(/Template basicCPUTemp/basicCPUTemp.core[{#CORE}])>85'
              recovery_mode: RECOVERY_EXPRESSION
              recovery_expression: 'avg(/Template basicCPUTemp/basicCPUTemp.core[{#CORE}],3m)<75'
              name: 'High temperature on Core {#CORE} (>85¬∞C)'
              priority: HIGH
            - uuid: '81c6260196884849925e016147101867'
              expression: 'last(/Template basicCPUTemp/basicCPUTemp.core[{#CORE}])>95'
              name: 'Critical temperature on Core {#CORE} (>95¬∞C)'
              priority: DISASTER
  graphs:
    - uuid: 'ff78a7a1ff9740198ff9c40fc3fce6ea'
      name: 'CPU Temperature'
      graph_items:
        - drawtype: BOLD_LINE
          color: 1A7C11
          calc_fnc: ALL
          item:
            host: 'Template basicCPUTemp'
            key: basicCPUTemp.min
        - sortorder: '1'
          drawtype: BOLD_LINE
          color: 2774A4
          calc_fnc: ALL
          item:
            host: 'Template basicCPUTemp'
            key: basicCPUTemp.avg
        - sortorder: '2'
          drawtype: BOLD_LINE
          color: F63100
          calc_fnc: ALL
          item:
            host: 'Template basicCPUTemp'
            key: basicCPUTemp.max

```# Zabbix Basic CPU Temperature Monitoring

–ü—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–ø–æ—è–¥–µ—Ä–Ω–æ + –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `lm-sensors` –∏ Zabbix Agent.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **UserParameters (One-liners)** –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫, —á—Ç–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤. –í–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Discovery (LLD).

## Credits / –ê–≤—Ç–æ—Ä—ã

* **–ê–≤—Ç–æ—Ä –∏–¥–µ–∏ / Original Idea:** [B1T0 (Tobias Scheithauer)](https://github.com/B1T0/zabbix-basic-cpu-temperature)
* **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ / Adaptation:** [didimozg](https://github.com/didimozg)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üî• **Discovery:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —è–¥–µ—Ä CPU.
* üìä **–ú–µ—Ç—Ä–∏–∫–∏:**
    * –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∫–∞–∂–¥–æ–≥–æ —è–¥—Ä–∞.
    * –°—Ä–µ–¥–Ω—è—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Avg).
    * –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Max).
    * –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Min).
* ‚ö†Ô∏è **–¢—Ä–∏–≥–≥–µ—Ä—ã:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ (>85¬∞C) –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (>95¬∞C).
* üìà **–ì—Ä–∞—Ñ–∏–∫–∏:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–∏–Ω/—Å—Ä–µ–¥/–º–∞–∫—Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã.
* ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Zabbix 7.0+, Zabbix Agent / Agent 2.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Linux)

–ù–∞ —Ü–µ–ª–µ–≤–æ–º —Ö–æ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç `lm-sensors` –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.

```bash
sudo apt update
sudo apt install lm-sensors gawk -y
